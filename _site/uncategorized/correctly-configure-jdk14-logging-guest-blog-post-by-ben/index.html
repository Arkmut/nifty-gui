<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Correctly configure jdk14-logging (guest blog post by Ben) &#8211; Nifty GUI</title>
<meta name="description" content="After being puzzled for a while why he wasn't able to configure logging in jME-Nifty properly Ben ("ben dot foxmoore at gmail dot com") set aside some time to figure it out. He was kind enough to share his findings with us in this guest blog post :)
So here is Ben explaining a proper way to configure Nifty logging:
It seems that most people who have issues with Nifty's logs want to cut down on the number shown, but I, on the other hand, wanted to see more. Unfortunately, setting the global logging level to Info caused JME3 to also log lots of information that wasn't relevant to the problem at hand. I attempted a quick fix using the following code:
public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        Logger.getLogger("de.lessvoid.nifty").setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                NiftyJmeDisplay niftyDisplay = new NiftyJmeDisplay(
                     assetManager, inputManager, audioRenderer, guiViewPort);
                Nifty nifty = niftyDisplay.getNifty();
                nifty.loadStyleFile("nifty-default-styles.xml");
                nifty.loadControlFile("nifty-default-controls.xml");
                guiViewPort.addProcessor(niftyDisplay);
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
However, you'll quickly realise that this doesn't actually cause Nifty to display any extra logs. After many hours trying to work out why, I discovered that it's all down to an intricacy in the way LogManager keeps track of the Loggers in your program. LogManager only keeps a weakReference to each Logger, allowing any that are no longer being used to be garbage collected. Because of this, in the time between line 3 and line 6, the JRE garbage collects the original "de.lessvoid.nifty" Logger created at line 3. When the "de.lessvoid.nifty.Nifty" Logger is retrieved in the Nifty constructor (called by the NiftyJmeDisplay constructor at line 6), a new one is created and it inherits its Level from the rootLogger, which is set to Warning at line 2. (The LogManager keeps a strong reference to the rootLogger so it is never garbage collected.)
A quick (but not very nifty) solution to this problem is to just keep a static (strong) reference to the "de.lessvoid.nifty" Logger in your class, as such:
    private static Logger logger;
    public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        logger = Logger.getLogger("de.lessvoid.nifty");
        logger.setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Ultimately though, the niftiest solution to this problem is to use a custom properties file which specifies to the LogManager how to initialize all of the Loggers. The following "logging.properties" file will initialize the Logging system in the same way as the code above:
handlers=java.util.logging.ConsoleHandler
.level=WARNING
de.lessvoid.nifty.level=INFO&lt;&#47;pre&gt;
There are two ways to tell the LogManager to use this file. Either use the
"-Djava.util.logging.config.file=pathToLogging.properties"&lt;&#47;pre&gt;
flag when running your program, or, alternatively, use the following code:
    public static void main(String[] args) throws Exception {
        InputStream inputStream =
             ClassLoader.getSystemResourceAsStream("logging.properties");
        LogManager.getLogManager().readConfiguration(inputStream);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Hopefully this should help anyone who comes across the same issue that I did!
(As a small side note, there is one final alternative: LogManager can also use the "java.util.logging.config.class" property. If present, the given class will be loaded, an object will be instantiated, and that object's constructor is responsible for providing the initial configuration as an InputStream, just as above.)
So that's it! Finally you can configure logging correctly! THANKS A LOT BEN! :D
void
PS: Nifty 1.3.3 and Nifty 1.4 have already been configured to log less by default. So most people should now be more happy with the new defaults. But if you really need the logging to debug an issue you now can do it properly - thanks to Ben :)



">
<meta name="keywords" content="">

  

<!-- Twitter Cards -->
<meta name="twitter:title" content="Correctly configure jdk14-logging (guest blog post by Ben)">
<meta name="twitter:description" content="After being puzzled for a while why he wasn't able to configure logging in jME-Nifty properly Ben ("ben dot foxmoore at gmail dot com") set aside some time to figure it out. He was kind enough to share his findings with us in this guest blog post :)
So here is Ben explaining a proper way to configure Nifty logging:
It seems that most people who have issues with Nifty's logs want to cut down on the number shown, but I, on the other hand, wanted to see more. Unfortunately, setting the global logging level to Info caused JME3 to also log lots of information that wasn't relevant to the problem at hand. I attempted a quick fix using the following code:
public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        Logger.getLogger("de.lessvoid.nifty").setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                NiftyJmeDisplay niftyDisplay = new NiftyJmeDisplay(
                     assetManager, inputManager, audioRenderer, guiViewPort);
                Nifty nifty = niftyDisplay.getNifty();
                nifty.loadStyleFile("nifty-default-styles.xml");
                nifty.loadControlFile("nifty-default-controls.xml");
                guiViewPort.addProcessor(niftyDisplay);
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
However, you'll quickly realise that this doesn't actually cause Nifty to display any extra logs. After many hours trying to work out why, I discovered that it's all down to an intricacy in the way LogManager keeps track of the Loggers in your program. LogManager only keeps a weakReference to each Logger, allowing any that are no longer being used to be garbage collected. Because of this, in the time between line 3 and line 6, the JRE garbage collects the original "de.lessvoid.nifty" Logger created at line 3. When the "de.lessvoid.nifty.Nifty" Logger is retrieved in the Nifty constructor (called by the NiftyJmeDisplay constructor at line 6), a new one is created and it inherits its Level from the rootLogger, which is set to Warning at line 2. (The LogManager keeps a strong reference to the rootLogger so it is never garbage collected.)
A quick (but not very nifty) solution to this problem is to just keep a static (strong) reference to the "de.lessvoid.nifty" Logger in your class, as such:
    private static Logger logger;
    public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        logger = Logger.getLogger("de.lessvoid.nifty");
        logger.setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Ultimately though, the niftiest solution to this problem is to use a custom properties file which specifies to the LogManager how to initialize all of the Loggers. The following "logging.properties" file will initialize the Logging system in the same way as the code above:
handlers=java.util.logging.ConsoleHandler
.level=WARNING
de.lessvoid.nifty.level=INFO&lt;&#47;pre&gt;
There are two ways to tell the LogManager to use this file. Either use the
"-Djava.util.logging.config.file=pathToLogging.properties"&lt;&#47;pre&gt;
flag when running your program, or, alternatively, use the following code:
    public static void main(String[] args) throws Exception {
        InputStream inputStream =
             ClassLoader.getSystemResourceAsStream("logging.properties");
        LogManager.getLogManager().readConfiguration(inputStream);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Hopefully this should help anyone who comes across the same issue that I did!
(As a small side note, there is one final alternative: LogManager can also use the "java.util.logging.config.class" property. If present, the given class will be loaded, an object will be instantiated, and that object's constructor is responsible for providing the initial configuration as an InputStream, just as above.)
So that's it! Finally you can configure logging correctly! THANKS A LOT BEN! :D
void
PS: Nifty 1.3.3 and Nifty 1.4 have already been configured to log less by default. So most people should now be more happy with the new defaults. But if you really need the logging to debug an issue you now can do it properly - thanks to Ben :)



">
<meta name="twitter:site" content="@void256">


<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Correctly configure jdk14-logging (guest blog post by Ben)">
<meta property="og:description" content="After being puzzled for a while why he wasn't able to configure logging in jME-Nifty properly Ben ("ben dot foxmoore at gmail dot com") set aside some time to figure it out. He was kind enough to share his findings with us in this guest blog post :)
So here is Ben explaining a proper way to configure Nifty logging:
It seems that most people who have issues with Nifty's logs want to cut down on the number shown, but I, on the other hand, wanted to see more. Unfortunately, setting the global logging level to Info caused JME3 to also log lots of information that wasn't relevant to the problem at hand. I attempted a quick fix using the following code:
public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        Logger.getLogger("de.lessvoid.nifty").setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                NiftyJmeDisplay niftyDisplay = new NiftyJmeDisplay(
                     assetManager, inputManager, audioRenderer, guiViewPort);
                Nifty nifty = niftyDisplay.getNifty();
                nifty.loadStyleFile("nifty-default-styles.xml");
                nifty.loadControlFile("nifty-default-controls.xml");
                guiViewPort.addProcessor(niftyDisplay);
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
However, you'll quickly realise that this doesn't actually cause Nifty to display any extra logs. After many hours trying to work out why, I discovered that it's all down to an intricacy in the way LogManager keeps track of the Loggers in your program. LogManager only keeps a weakReference to each Logger, allowing any that are no longer being used to be garbage collected. Because of this, in the time between line 3 and line 6, the JRE garbage collects the original "de.lessvoid.nifty" Logger created at line 3. When the "de.lessvoid.nifty.Nifty" Logger is retrieved in the Nifty constructor (called by the NiftyJmeDisplay constructor at line 6), a new one is created and it inherits its Level from the rootLogger, which is set to Warning at line 2. (The LogManager keeps a strong reference to the rootLogger so it is never garbage collected.)
A quick (but not very nifty) solution to this problem is to just keep a static (strong) reference to the "de.lessvoid.nifty" Logger in your class, as such:
    private static Logger logger;
    public static void main(String[] args) {
        Logger.getLogger("").setLevel(Level.WARNING);
        logger = Logger.getLogger("de.lessvoid.nifty");
        logger.setLevel(Level.INFO);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Ultimately though, the niftiest solution to this problem is to use a custom properties file which specifies to the LogManager how to initialize all of the Loggers. The following "logging.properties" file will initialize the Logging system in the same way as the code above:
handlers=java.util.logging.ConsoleHandler
.level=WARNING
de.lessvoid.nifty.level=INFO&lt;&#47;pre&gt;
There are two ways to tell the LogManager to use this file. Either use the
"-Djava.util.logging.config.file=pathToLogging.properties"&lt;&#47;pre&gt;
flag when running your program, or, alternatively, use the following code:
    public static void main(String[] args) throws Exception {
        InputStream inputStream =
             ClassLoader.getSystemResourceAsStream("logging.properties");
        LogManager.getLogManager().readConfiguration(inputStream);
        SimpleApplication app = new SimpleApplication() {
            public void simpleInitApp() {
                ...
            }
        };
        app.start();
    }&lt;&#47;pre&gt;
Hopefully this should help anyone who comes across the same issue that I did!
(As a small side note, there is one final alternative: LogManager can also use the "java.util.logging.config.class" property. If present, the given class will be loaded, an object will be instantiated, and that object's constructor is responsible for providing the initial configuration as an InputStream, just as above.)
So that's it! Finally you can configure logging correctly! THANKS A LOT BEN! :D
void
PS: Nifty 1.3.3 and Nifty 1.4 have already been configured to log less by default. So most people should now be more happy with the new defaults. But if you really need the logging to debug an issue you now can do it properly - thanks to Ben :)



">
<meta property="og:url" content="/uncategorized/correctly-configure-jdk14-logging-guest-blog-post-by-ben/">
<meta property="og:site_name" content="Nifty GUI">





<link rel="canonical" href="/uncategorized/correctly-configure-jdk14-logging-guest-blog-post-by-ben/">
<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="Nifty GUI Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/">Nifty GUI</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav role="navigation" id="site-nav" class="nav">
		    <ul>
		        
				    
				        
				    
				    <li><a href="/about/" >About</a></li>
				
				    
				        
				    
				    <li><a href="/posts/" >Blog</a></li>
				
				    
				        
				        
				    <li><a href="https://github.com/void256/nifty-gui" target="_blank">Nifty GUI @ GitHub</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->



<div id="main" role="main">
  <div class="article-author-side">
    
  


	<img src="/images/" class="bio-photo" alt=" bio photo">

<h3></h3>
<p></p>
















  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/uncategorized/correctly-configure-jdk14-logging-guest-blog-post-by-ben/" rel="bookmark" title="Correctly configure jdk14-logging (guest blog post by Ben)">Correctly configure jdk14-logging (guest blog post by Ben)</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>After being puzzled for a while why he wasn't able to configure logging in jME-Nifty properly Ben ("ben dot foxmoore at gmail dot com") set aside some time to figure it out. He was kind enough to share his findings with us in this guest blog post :)</p>
<p>So here is Ben explaining a proper way to configure Nifty logging:</p>
<p>It seems that most people who have issues with Nifty's logs want to cut down on the number shown, but I, on the other hand, wanted to see more. Unfortunately, setting the global logging level to Info caused JME3 to also log lots of information that wasn't relevant to the problem at hand. I attempted a quick fix using the following code:</p>
<pre class="brush:java">public static void main(String[] args) {<br />
        Logger.getLogger("").setLevel(Level.WARNING);<br />
        Logger.getLogger("de.lessvoid.nifty").setLevel(Level.INFO);<br />
        SimpleApplication app = new SimpleApplication() {<br />
            public void simpleInitApp() {<br />
                NiftyJmeDisplay niftyDisplay = new NiftyJmeDisplay(<br />
                     assetManager, inputManager, audioRenderer, guiViewPort);<br />
                Nifty nifty = niftyDisplay.getNifty();<br />
                nifty.loadStyleFile("nifty-default-styles.xml");<br />
                nifty.loadControlFile("nifty-default-controls.xml");<br />
                guiViewPort.addProcessor(niftyDisplay);<br />
            }<br />
        };<br />
        app.start();<br />
    }&lt;&#47;pre&gt;
<p>However, you'll quickly realise that this doesn't actually cause Nifty to display any extra logs. After many hours trying to work out why, I discovered that it's all down to an intricacy in the way LogManager keeps track of the Loggers in your program. LogManager only keeps a weakReference to each Logger, allowing any that are no longer being used to be garbage collected. Because of this, in the time between line 3 and line 6, the JRE garbage collects the original "de.lessvoid.nifty" Logger created at line 3. When the "de.lessvoid.nifty.Nifty" Logger is retrieved in the Nifty constructor (called by the NiftyJmeDisplay constructor at line 6), a new one is created and it inherits its Level from the rootLogger, which is set to Warning at line 2. (The LogManager keeps a strong reference to the rootLogger so it is never garbage collected.)</p>
<p>A quick (but not very nifty) solution to this problem is to just keep a static (strong) reference to the "de.lessvoid.nifty" Logger in your class, as such:</p>
<pre class="brush:java">    private static Logger logger;
<p>    public static void main(String[] args) {<br />
        Logger.getLogger("").setLevel(Level.WARNING);<br />
        logger = Logger.getLogger("de.lessvoid.nifty");<br />
        logger.setLevel(Level.INFO);<br />
        SimpleApplication app = new SimpleApplication() {<br />
            public void simpleInitApp() {<br />
                ...<br />
            }<br />
        };<br />
        app.start();<br />
    }&lt;&#47;pre&gt;</p>
<p>Ultimately though, the niftiest solution to this problem is to use a custom properties file which specifies to the LogManager how to initialize all of the Loggers. The following "logging.properties" file will initialize the Logging system in the same way as the code above:</p>
<pre class="brush:java">handlers=java.util.logging.ConsoleHandler<br />
.level=WARNING<br />
de.lessvoid.nifty.level=INFO&lt;&#47;pre&gt;
<p>There are two ways to tell the LogManager to use this file. Either use the</p>
<pre class="brush:java">"-Djava.util.logging.config.file=pathToLogging.properties"&lt;&#47;pre&gt;
<p>flag when running your program, or, alternatively, use the following code:</p>
<pre class="brush:java">    public static void main(String[] args) throws Exception {<br />
        InputStream inputStream =<br />
             ClassLoader.getSystemResourceAsStream("logging.properties");<br />
        LogManager.getLogManager().readConfiguration(inputStream);<br />
        SimpleApplication app = new SimpleApplication() {<br />
            public void simpleInitApp() {<br />
                ...<br />
            }<br />
        };<br />
        app.start();<br />
    }&lt;&#47;pre&gt;
<p>Hopefully this should help anyone who comes across the same issue that I did!</p>
<p>(As a small side note, there is one final alternative: LogManager can also use the "java.util.logging.config.class" property. If present, the given class will be loaded, an object will be instantiated, and that object's constructor is responsible for providing the initial configuration as an InputStream, just as above.)</p>
<p>So that's it! Finally you can configure logging correctly! THANKS A LOT BEN! :D</p>
<p>void</p>
<p>PS: Nifty 1.3.3 and Nifty 1.4 have already been configured to log less by default. So most people should now be more happy with the new defaults. But if you really need the logging to debug an issue you now can do it properly - thanks to Ben :)</p>
</pre></pre></pre></pre></pre>

      <hr />
      <footer role="contentinfo">
        <div class="article-author-bottom">
          
  


	<img src="/images/" class="bio-photo" alt=" bio photo">

<h3></h3>
<p></p>
















        </div>
        <p class="byline"><strong>Correctly configure jdk14-logging (guest blog post by Ben)</strong> was published on <time datetime="2013-03-16T01:33:28+01:00">March 16, 2013</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/blog/update/new-blog/" title="Moving the Blog to github pages">Moving the Blog to github pages</a></li>
    
      <li><a href="/uncategorized/nifty-1-4-has-been-released/" title="Nifty 1.4 has been released">Nifty 1.4 has been released</a></li>
    
      <li><a href="/uncategorized/jogamp-bof-siggraph-2013/" title="JogAmp BOF Siggraph 2013">JogAmp BOF Siggraph 2013</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  <footer>
    

<span>&copy; 2014 void256. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="http://mademistakes.com/minimal-mistakes/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/assets/js/scripts.min.js"></script>


  
<script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'nifty-gui'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

	        

</body>
</html>